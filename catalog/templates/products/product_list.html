{% extends "base.html" %}
{% block title %}Products{% endblock %}

{% block content %}

<div class="max-w-6xl mx-auto">
  <div class="flex items-center justify-between mb-5">
    <div>
      <h1 class="text-[22px] font-semibold text-slate-800">Products</h1>
      <p class="text-slate-500 text-sm">Manage your products, price, and status.</p>
    </div>

    <a href="{% url 'catalog:product_create' %}"
       class="px-4 py-2 rounded-xl bg-orange-600 text-white text-sm font-semibold hover:bg-orange-700 shadow-sm">
      + Add Product
    </a>
  </div>

  <!-- Search -->
  <form method="get" class="mb-4 flex gap-3">
    <input
      type="text"
      name="q"
      value="{{ q }}"
      placeholder="Search by name, SKU, or category..."
      class="w-full rounded-xl border border-slate-200 px-4 py-2 bg-white focus:outline-none focus:ring-2 focus:ring-orange-200"
    />
    <button class="px-4 py-2 rounded-xl bg-slate-900 text-white text-sm font-semibold hover:bg-slate-800">
      Search
    </button>
  </form>

  <!-- Table -->
  <div class="bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden">
    <div class="overflow-x-auto">
      <table class="w-full text-sm">
        <thead class="bg-slate-50 text-slate-500">
          <tr class="border-b">
            <th class="text-left py-3 px-4">Name</th>
            <th class="text-left py-3 px-4">SKU</th>
            <th class="text-left py-3 px-4">Category</th>
            <th class="text-left py-3 px-4">Sale Price</th>
            <th class="text-left py-3 px-4">Cost Price</th>
            <th class="text-left py-3 px-4">Status</th>
            <th class="text-right py-3 px-4">Action</th>
          </tr>
        </thead>

        <tbody class="text-slate-700">
          {% for p in products %}
            <tr class="border-b hover:bg-slate-50">
              <td class="py-3 px-4 font-medium">{{ p.name }}</td>
              <td class="py-3 px-4">{{ p.sku|default:"—" }}</td>
              <td class="py-3 px-4">{{ p.category.name }}</td>
              <td class="py-3 px-4">৳{{ p.sale_price }}</td>
              <td class="py-3 px-4">{{ p.cost_price|default:"—" }}</td>
              <td class="py-3 px-4">
                {% if p.is_active %}
                  <span class="px-2 py-1 text-xs rounded-full bg-emerald-100 text-emerald-700">
                    Active
                  </span>
                {% else %}
                  <span class="px-2 py-1 text-xs rounded-full bg-rose-100 text-rose-700">
                    Inactive
                  </span>
                {% endif %}
              </td>

              <td class="py-3 px-4 text-right space-x-2">
                <a href="{% url 'catalog:product_update' p.id %}"
                   class="px-3 py-1.5 rounded-lg bg-slate-900 text-white text-xs font-semibold hover:bg-slate-800">
                  Edit
                </a>

                <a href="{% url 'catalog:product_delete' p.id %}"
                   class="px-3 py-1.5 rounded-lg bg-rose-600 text-white text-xs font-semibold hover:bg-rose-700">
                  Delete
                </a>
              </td>
            </tr>
          {% empty %}
            <tr>
              <td colspan="7" class="py-12 text-center text-slate-500">
                No products found.
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

  <!-- Pagination -->
  {% if is_paginated %}
    <div class="mt-5 flex items-center justify-between text-sm">
      <p class="text-slate-500">
        Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}
      </p>

      <div class="flex gap-2">
        {% if page_obj.has_previous %}
          <a class="px-3 py-2 rounded-xl border border-slate-200 hover:bg-white"
             href="?q={{ q }}&page={{ page_obj.previous_page_number }}">
            Prev
          </a>
        {% endif %}

        {% if page_obj.has_next %}
          <a class="px-3 py-2 rounded-xl border border-slate-200 hover:bg-white"
             href="?q={{ q }}&page={{ page_obj.next_page_number }}">
            Next
          </a>
        {% endif %}
      </div>
    </div>
  {% endif %}
</div>

{% endblock %}
